---
import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';

const services = await getCollection('services');
---
<section id="services" aria-labelledby="services-heading" class="relative py-20 bg-panel overflow-hidden mx-6">
  <div class="container mx-auto px-6 relative z-10">
    <div class="text-center mb-16" data-animation="fade-in">
      <h2 id="services-heading" class="text-3xl md:text-4xl font-heading text-secondary mb-6 font-bold">Our Services</h2>
      <p class="text-lg text-secondary max-w-2xl mx-auto">Comprehensive therapy services tailored to your unique needs and goals</p>
    </div>
    
    <ul class="space-y-16" role="list">
      {services.map((service: CollectionEntry<'services'>, index: number) => (
        <li 
          class:list={[
            "group",
            "md:grid md:grid-cols-2 md:gap-12 items-center",
          ]}
        >
          <div class:list={["relative", { "md:order-2": index % 2 === 0 }]}>
            <div class="relative bg-background rounded-3xl shadow-md p-8 text-center md:text-left flex flex-col h-full card hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
              <div class="flex-grow">
                <div class="mb-5 text-primary md:float-left md:mr-6" aria-hidden="true">
                  <div class="w-16 h-16 md:mx-0 rounded-full bg-accent-light flex items-center justify-center group-hover:bg-accent transition-colors duration-300">
                    <img src={service.data.icon} alt="" class="w-8 h-8" loading="lazy" />
                  </div>
                </div>
                <h3 class="text-2xl font-heading font-semibold mb-3 text-secondary group-hover:text-primary transition-colors duration-300">{service.data.title}</h3>
                <p class="text-base text-secondary opacity-90 mb-6">{service.data.description}</p>
              </div>
              <div class="mt-auto">
                <a 
                  href={`/services/${service.slug}`} 
                  class="btn btn-primary hover:bg-accent hover:text-primary transition-all duration-300"
                  aria-label={`Learn more about ${service.data.title}`}
                >
                  Learn More
                </a>
              </div>
              <!-- Decorative highlight element -->
              <div class="absolute top-4 right-4 w-3 h-3 bg-highlight-yellow rounded-full opacity-60 group-hover:opacity-100 transition-opacity duration-300" aria-hidden="true"></div>
            </div>
          </div>
          <div class:list={["mt-8 md:mt-0", { "md:order-1": index % 2 === 0 }]}>
            {service.data.image && (
              <div class="rounded-3xl overflow-hidden shadow-xl group-hover:shadow-2xl transition-shadow duration-300">
                <img
                  src={service.data.image}
                  alt={`Illustration of ${service.data.title} therapy service`}
                  class="w-full h-auto object-cover aspect-video group-hover:scale-105 transition-transform duration-500"
                  loading="lazy"
                  width="500"
                  height="281"
                />
              </div>
            )}
          </div>
        </li>
      ))}
    </ul>
  </div>
  
  <div class="absolute -bottom-24 -right-24 w-64 h-64 bg-primary/5 rounded-full blur-3xl" aria-hidden="true"></div>
  <div class="absolute -top-24 -left-24 w-64 h-64 bg-accent/5 rounded-full blur-3xl" aria-hidden="true"></div>
  <!-- Additional decorative elements with highlight colors -->
  <div class="absolute top-1/3 left-8 w-32 h-32 bg-highlight-lavender/20 rounded-full blur-2" aria-hidden="true"></div>
  <div class="absolute bottom-1/3 right-8 w-24 h-24 bg-highlight-pink/20 rounded-full blur-2" aria-hidden="true"></div>
</section>
