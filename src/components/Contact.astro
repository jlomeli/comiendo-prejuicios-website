---
import type { ContactProps } from '../types/ContactProps';

const contact: ContactProps = {
  address: '123 Therapy Street, Suite 100, Los Angeles, CA 90001',
  phone: '(555) 123-4567',
  email: 'contact@comiendo-prejuicios.com',
  hours: 'Monday - Friday: 9am - 7pm',
  responseTime: 'Usually within 24 hours'
};
---

<section id="contact" class="py-20 bg-gradient-to-br from-white to-primary/5">
  <div class="container mx-auto px-6">
    <div class="max-w-4xl mx-auto">
      <h2 class="text-3xl md:text-4xl font-heading text-primary mb-12 font-semibold text-center">Contact Us</h2>
      <div class="grid md:grid-cols-2 gap-12">
        <div>
          <address class="not-italic mb-4 text-neutral-dark">
            {contact.address}<br />
            Phone: <a href={`tel:${contact.phone}`} class="hover:text-primary transition-colors">{contact.phone}</a><br />
            Email: <a href={`mailto:${contact.email}`} class="hover:text-primary transition-colors">{contact.email}</a>
          </address>
          <p class="mb-2 text-neutral-dark"><strong>Hours:</strong> {contact.hours}</p>
          <p class="mb-2 text-neutral-dark"><strong>Response Time:</strong> {contact.responseTime}</p>
        </div>
        
        <!-- Success message -->
        <div id="successMessage" class="hidden bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4" role="alert">
          <strong class="font-bold">Thank you!</strong>
          <span class="block sm:inline"> Your message has been sent successfully. We'll get back to you soon.</span>
          <button type="button" class="absolute top-0 right-0 px-4 py-3" id="closeSuccess">
            <span class="sr-only">Close</span>
            <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
        
        <!-- Error message -->
        <div id="errorMessage" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
          <strong class="font-bold">Oops!</strong>
          <span class="block sm:inline"> Something went wrong. Please try again later.</span>
          <button type="button" class="absolute top-0 right-0 px-4 py-3" id="closeError">
            <span class="sr-only">Close</span>
            <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
        
        <form 
          class="space-y-4" 
          name="contact" 
          method="POST" 
          data-netlify="true"
          id="contactForm"
        >
          <div>
            <label for="name" class="block text-neutral-dark font-medium mb-1">Name</label>
            <input 
              id="name" 
              name="name" 
              type="text" 
              required 
              minlength="2"
              class="w-full rounded border border-neutral-dark/20 px-4 py-2 focus:outline-primary" 
              autofocus
            />
            <p id="nameError" class="text-red-500 text-sm mt-1 hidden">Please enter a valid name (at least 2 characters)</p>
          </div>
          <div>
            <label for="email" class="block text-neutral-dark font-medium mb-1">Email</label>
            <input 
              id="email" 
              name="email" 
              type="email" 
              required 
              pattern="[a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,}$"
              class="w-full rounded border border-neutral-dark/20 px-4 py-2 focus:outline-primary" 
            />
            <p id="emailError" class="text-red-500 text-sm mt-1 hidden">Please enter a valid email address</p>
          </div>
          <div>
            <label for="phone" class="block text-neutral-dark font-medium mb-1">Phone (optional)</label>
            <input 
              id="phone" 
              name="phone" 
              type="tel" 
              pattern="[\d\s\(\)\-\+]+"
              class="w-full rounded border border-neutral-dark/20 px-4 py-2 focus:outline-primary" 
            />
            <p id="phoneError" class="text-red-500 text-sm mt-1 hidden">Please enter a valid phone number</p>
          </div>
          <div>
            <label for="message" class="block text-neutral-dark font-medium mb-1">Message</label>
            <textarea 
              id="message" 
              name="message" 
              required 
              minlength="10"
              rows="4" 
              class="w-full rounded border border-neutral-dark/20 px-4 py-2 focus:outline-primary"
            ></textarea>
            <p id="messageError" class="text-red-500 text-sm mt-1 hidden">Please enter a message (at least 10 characters)</p>
          </div>
          
          <!-- Honeypot field to prevent spam -->
          <div class="hidden">
            <label for="bot-field">Don't fill this out if you're human:</label>
            <input name="bot-field" id="bot-field" />
          </div>
          
          <div class="text-right">
            <button
              type="submit"
              id="submitButton"
              class="inline-block bg-primary hover:bg-primary-dark text-white font-bold py-3 px-8 rounded-full transition-colors duration-300"
            >
              Send Message
            </button>
            
            <!-- Loading spinner (hidden by default) -->
            <button
              type="button"
              id="loadingButton"
              class="hidden inline-block bg-primary text-white font-bold py-3 px-8 rounded-full"
              disabled
            >
              <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
              Sending...
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>

<script src="../scripts/contact-form.ts"></script>
